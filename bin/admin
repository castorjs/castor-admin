#!/usr/bin/env node
/*jshint node:true*/
'use strict';
var debug = require('debug')('castor:admin:bin');
var http  = require('http');
var path  = require('path');
var conf  = require('../config.js');

debug(process.argv);
if (process.argv.length > 2) {
  conf.set('instances_path', path.resolve(process.argv.pop()));
}

require('../app.js')(function(app) {
  http.createServer(app).listen(conf.get('port'), function () {
    console.log("Castor admin server listening on port " + conf.get('port'));
    console.log("Instances will be in " + conf.get('instances_path'));
  });
});
